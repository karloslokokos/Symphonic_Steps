{"ast":null,"code":"import React,{useRef,useEffect}from'react';import VexFlow from'vexflow';import{jsx as _jsx}from\"react/jsx-runtime\";const VF=VexFlow.Flow;const{Renderer,Stave,StaveNote,Formatter}=VF;const clefAndTimeWidth=60;export function Score(_ref){let{staves=[],clef='treble',timeSignature='4/4',width=1500,height=150}=_ref;const container=useRef();const rendererRef=useRef();useEffect(()=>{const initializeRenderer=()=>{rendererRef.current=new Renderer(container.current,Renderer.Backends.SVG);};if(!rendererRef.current){initializeRenderer();}const renderer=rendererRef.current;renderer.resize(width,height);const context=renderer.getContext();context.setFont('Arial',10,'').setBackgroundFillStyle('#eed');const staveWidth=(width-clefAndTimeWidth)/staves.length;let currX=0;staves.forEach((notes,i)=>{const stave=new Stave(currX,0,staveWidth);if(i===0){stave.setWidth(staveWidth+clefAndTimeWidth);stave.addClef(clef).addTimeSignature(timeSignature);}currX+=stave.getWidth();stave.setContext(context).draw();const processedNotes=notes.map(note=>typeof note==='string'?{key:note}:Array.isArray(note)?{key:note[0],duration:note[1]}:note).map(_ref2=>{let{key,...rest}=_ref2;return typeof key==='string'?{key:key.includes('/')?key:\"\".concat(key[0],\"/\").concat(key.slice(1)),...rest}:rest;}).map(_ref3=>{let{key,keys,duration='q'}=_ref3;return new StaveNote({keys:key?[key]:keys,duration:String(duration)});});Formatter.FormatAndDraw(context,stave,processedNotes,{auto_beam:true});});},[staves,clef,timeSignature,width,height]);return/*#__PURE__*/_jsx(\"div\",{ref:container,style:{marginLeft:'10px'}});}","map":{"version":3,"names":["React","useRef","useEffect","VexFlow","jsx","_jsx","VF","Flow","Renderer","Stave","StaveNote","Formatter","clefAndTimeWidth","Score","_ref","staves","clef","timeSignature","width","height","container","rendererRef","initializeRenderer","current","Backends","SVG","renderer","resize","context","getContext","setFont","setBackgroundFillStyle","staveWidth","length","currX","forEach","notes","i","stave","setWidth","addClef","addTimeSignature","getWidth","setContext","draw","processedNotes","map","note","key","Array","isArray","duration","_ref2","rest","includes","concat","slice","_ref3","keys","String","FormatAndDraw","auto_beam","ref","style","marginLeft"],"sources":["/Users/fitzpatrickcarl/Documents/project-root/frontend/src/Components/Score.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport VexFlow from 'vexflow';\n\n\nconst VF = VexFlow.Flow;\nconst { Renderer, Stave, StaveNote, Formatter } = VF;\n\nconst clefAndTimeWidth = 60;\n\nexport function Score({ staves = [], clef = 'treble', timeSignature = '4/4', width = 1500, height = 150 }) {\n  const container = useRef();\n  const rendererRef = useRef();\n\n  useEffect(() => {\n    const initializeRenderer = () => {\n      rendererRef.current = new Renderer(container.current, Renderer.Backends.SVG);\n    };\n\n    if (!rendererRef.current) {\n      initializeRenderer();\n    }\n\n    const renderer = rendererRef.current;\n    renderer.resize(width, height);\n\n    const context = renderer.getContext();\n    context.setFont('Arial', 10, '').setBackgroundFillStyle('#eed');\n\n    const staveWidth = (width - clefAndTimeWidth) / staves.length;\n    let currX = 0;\n\n    staves.forEach((notes, i) => {\n      const stave = new Stave(currX, 0, staveWidth);\n\n      if (i === 0) {\n        stave.setWidth(staveWidth + clefAndTimeWidth);\n        stave.addClef(clef).addTimeSignature(timeSignature);\n      }\n\n      currX += stave.getWidth();\n      stave.setContext(context).draw();\n\n      const processedNotes = notes.map(note => (\n        typeof note === 'string' ? { key: note } : (Array.isArray(note) ? { key: note[0], duration: note[1] } : note)\n      )).map(({ key, ...rest }) => (\n        typeof key === 'string' ? { key: key.includes('/') ? key : `${key[0]}/${key.slice(1)}`, ...rest } : rest\n      )).map(({ key, keys, duration = 'q' }) => (\n        new StaveNote({\n          keys: key ? [key] : keys,\n          duration: String(duration),\n        })\n      ));\n\n      Formatter.FormatAndDraw(context, stave, processedNotes, { auto_beam: true });\n    });\n  }, [staves, clef, timeSignature, width, height]);\n\n  return <div ref={container} style={{ marginLeft: '10px' }} />;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}