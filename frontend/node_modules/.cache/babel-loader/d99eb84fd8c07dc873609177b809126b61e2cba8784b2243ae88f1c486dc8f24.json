{"ast":null,"code":"var _jsxFileName = \"/Users/fitzpatrickcarl/my-musical-stairs-app/src/Score.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from 'react';\nimport VexFlow from 'vexflow';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VF = VexFlow.Flow;\nconst {\n  Formatter,\n  Renderer,\n  Stave,\n  StaveNote\n} = VF;\nconst notesDuration = 'q'; // Default duration for all notes\n\nexport function Score({\n  staves = [],\n  clefs = ['treble'],\n  timeSignatures = ['4/4'],\n  width = 500,\n  height = 150\n}) {\n  _s();\n  const container = useRef();\n  const rendererRef = useRef();\n  useEffect(() => {\n    if (rendererRef.current == null) {\n      rendererRef.current = new Renderer(container.current, Renderer.Backends.SVG);\n    }\n    const renderer = rendererRef.current;\n    renderer.resize(width, height);\n    const context = renderer.getContext();\n    context.setFont('Arial', 10, '').setBackgroundFillStyle('#eed');\n    let currX = 0;\n    const staveWidth = width;\n    staves.forEach((notes, index) => {\n      const stave = new Stave(currX, 0, staveWidth);\n      stave.setContext(context);\n      const clef = clefs[index % clefs.length];\n      const timeSignature = timeSignatures[index % timeSignatures.length];\n      if (index % 32 === 0) {\n        stave.addClef(clef);\n        stave.addTimeSignature(timeSignature);\n      }\n      const processedNotes = notes.map(pitch => {\n        const [note, octave] = pitch.match(/[a-zA-Z]+|[0-9]+/g);\n        return new StaveNote({\n          keys: [`${note}/${octave}`],\n          duration: notesDuration\n        });\n      });\n      stave.setContext(context).draw();\n      Formatter.FormatAndDraw(context, stave, processedNotes, {\n        auto_beam: true\n      });\n      currX += staveWidth;\n      if (currX + staveWidth > width) {\n        // Start a new line\n        currX = 0;\n      }\n    });\n  }, [staves, clefs, timeSignatures, width]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: container\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 10\n  }, this);\n}\n_s(Score, \"Oo94nw6YKmif0GbcQr28f6bFgJU=\");\n_c = Score;\nvar _c;\n$RefreshReg$(_c, \"Score\");","map":{"version":3,"names":["React","useRef","useEffect","VexFlow","jsxDEV","_jsxDEV","VF","Flow","Formatter","Renderer","Stave","StaveNote","notesDuration","Score","staves","clefs","timeSignatures","width","height","_s","container","rendererRef","current","Backends","SVG","renderer","resize","context","getContext","setFont","setBackgroundFillStyle","currX","staveWidth","forEach","notes","index","stave","setContext","clef","length","timeSignature","addClef","addTimeSignature","processedNotes","map","pitch","note","octave","match","keys","duration","draw","FormatAndDraw","auto_beam","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/fitzpatrickcarl/my-musical-stairs-app/src/Score.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport VexFlow from 'vexflow';\n\nconst VF = VexFlow.Flow;\nconst { Formatter, Renderer, Stave, StaveNote } = VF;\n\nconst notesDuration = 'q'; // Default duration for all notes\n\nexport function Score({\n  staves = [],\n  clefs = ['treble'],\n  timeSignatures = ['4/4'],\n  width = 500,\n  height = 150,\n}) {\n  const container = useRef();\n  const rendererRef = useRef();\n\n  useEffect(() => {\n    if (rendererRef.current == null) {\n      rendererRef.current = new Renderer(container.current, Renderer.Backends.SVG);\n    }\n\n    const renderer = rendererRef.current;\n    renderer.resize(width, height);\n    const context = renderer.getContext();\n    context.setFont('Arial', 10, '').setBackgroundFillStyle('#eed');\n\n    let currX = 0;\n    const staveWidth = width;\n\n    staves.forEach((notes, index) => {\n      const stave = new Stave(currX, 0, staveWidth);\n      stave.setContext(context);\n\n      const clef = clefs[index % clefs.length];\n      const timeSignature = timeSignatures[index % timeSignatures.length];\n\n      if (index % 32 === 0) {\n        stave.addClef(clef);\n        stave.addTimeSignature(timeSignature);\n      }\n\n      const processedNotes = notes.map((pitch) => {\n        const [note, octave] = pitch.match(/[a-zA-Z]+|[0-9]+/g);\n        return new StaveNote({\n          keys: [`${note}/${octave}`],\n          duration: notesDuration,\n        });\n      });\n\n      stave.setContext(context).draw();\n      Formatter.FormatAndDraw(context, stave, processedNotes, {\n        auto_beam: true,\n      });\n\n      currX += staveWidth;\n\n      if (currX + staveWidth > width) {\n        // Start a new line\n        currX = 0;\n      }\n    });\n  }, [staves, clefs, timeSignatures, width]);\n\n  return <div ref={container} />;\n}\n\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAChD,OAAOC,OAAO,MAAM,SAAS;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9B,MAAMC,EAAE,GAAGH,OAAO,CAACI,IAAI;AACvB,MAAM;EAAEC,SAAS;EAAEC,QAAQ;EAAEC,KAAK;EAAEC;AAAU,CAAC,GAAGL,EAAE;AAEpD,MAAMM,aAAa,GAAG,GAAG,CAAC,CAAC;;AAE3B,OAAO,SAASC,KAAKA,CAAC;EACpBC,MAAM,GAAG,EAAE;EACXC,KAAK,GAAG,CAAC,QAAQ,CAAC;EAClBC,cAAc,GAAG,CAAC,KAAK,CAAC;EACxBC,KAAK,GAAG,GAAG;EACXC,MAAM,GAAG;AACX,CAAC,EAAE;EAAAC,EAAA;EACD,MAAMC,SAAS,GAAGnB,MAAM,CAAC,CAAC;EAC1B,MAAMoB,WAAW,GAAGpB,MAAM,CAAC,CAAC;EAE5BC,SAAS,CAAC,MAAM;IACd,IAAImB,WAAW,CAACC,OAAO,IAAI,IAAI,EAAE;MAC/BD,WAAW,CAACC,OAAO,GAAG,IAAIb,QAAQ,CAACW,SAAS,CAACE,OAAO,EAAEb,QAAQ,CAACc,QAAQ,CAACC,GAAG,CAAC;IAC9E;IAEA,MAAMC,QAAQ,GAAGJ,WAAW,CAACC,OAAO;IACpCG,QAAQ,CAACC,MAAM,CAACT,KAAK,EAAEC,MAAM,CAAC;IAC9B,MAAMS,OAAO,GAAGF,QAAQ,CAACG,UAAU,CAAC,CAAC;IACrCD,OAAO,CAACE,OAAO,CAAC,OAAO,EAAE,EAAE,EAAE,EAAE,CAAC,CAACC,sBAAsB,CAAC,MAAM,CAAC;IAE/D,IAAIC,KAAK,GAAG,CAAC;IACb,MAAMC,UAAU,GAAGf,KAAK;IAExBH,MAAM,CAACmB,OAAO,CAAC,CAACC,KAAK,EAAEC,KAAK,KAAK;MAC/B,MAAMC,KAAK,GAAG,IAAI1B,KAAK,CAACqB,KAAK,EAAE,CAAC,EAAEC,UAAU,CAAC;MAC7CI,KAAK,CAACC,UAAU,CAACV,OAAO,CAAC;MAEzB,MAAMW,IAAI,GAAGvB,KAAK,CAACoB,KAAK,GAAGpB,KAAK,CAACwB,MAAM,CAAC;MACxC,MAAMC,aAAa,GAAGxB,cAAc,CAACmB,KAAK,GAAGnB,cAAc,CAACuB,MAAM,CAAC;MAEnE,IAAIJ,KAAK,GAAG,EAAE,KAAK,CAAC,EAAE;QACpBC,KAAK,CAACK,OAAO,CAACH,IAAI,CAAC;QACnBF,KAAK,CAACM,gBAAgB,CAACF,aAAa,CAAC;MACvC;MAEA,MAAMG,cAAc,GAAGT,KAAK,CAACU,GAAG,CAAEC,KAAK,IAAK;QAC1C,MAAM,CAACC,IAAI,EAAEC,MAAM,CAAC,GAAGF,KAAK,CAACG,KAAK,CAAC,mBAAmB,CAAC;QACvD,OAAO,IAAIrC,SAAS,CAAC;UACnBsC,IAAI,EAAE,CAAE,GAAEH,IAAK,IAAGC,MAAO,EAAC,CAAC;UAC3BG,QAAQ,EAAEtC;QACZ,CAAC,CAAC;MACJ,CAAC,CAAC;MAEFwB,KAAK,CAACC,UAAU,CAACV,OAAO,CAAC,CAACwB,IAAI,CAAC,CAAC;MAChC3C,SAAS,CAAC4C,aAAa,CAACzB,OAAO,EAAES,KAAK,EAAEO,cAAc,EAAE;QACtDU,SAAS,EAAE;MACb,CAAC,CAAC;MAEFtB,KAAK,IAAIC,UAAU;MAEnB,IAAID,KAAK,GAAGC,UAAU,GAAGf,KAAK,EAAE;QAC9B;QACAc,KAAK,GAAG,CAAC;MACX;IACF,CAAC,CAAC;EACJ,CAAC,EAAE,CAACjB,MAAM,EAAEC,KAAK,EAAEC,cAAc,EAAEC,KAAK,CAAC,CAAC;EAE1C,oBAAOZ,OAAA;IAAKiD,GAAG,EAAElC;EAAU;IAAAmC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AAChC;AAACvC,EAAA,CA1DeN,KAAK;AAAA8C,EAAA,GAAL9C,KAAK;AAAA,IAAA8C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}