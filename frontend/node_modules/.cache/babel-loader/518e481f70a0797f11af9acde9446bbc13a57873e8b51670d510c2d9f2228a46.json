{"ast":null,"code":"var _jsxFileName = \"/Users/fitzpatrickcarl/my-musical-stairs-app/src/Score.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from 'react';\nimport VexFlow from 'vexflow';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VF = VexFlow.Flow;\nconst {\n  Formatter,\n  Renderer,\n  Stave,\n  StaveNote\n} = VF;\nconst clefAndTimeWidth = 60;\nconst notesPerStave = 32;\nconst staveSpacing = 20; // Adjust this to control the space between staves\n\nexport function Score({\n  staves = [],\n  clef = 'treble',\n  timeSignature = '4/4',\n  width = 1000,\n  height = 150\n}) {\n  _s();\n  const container = useRef();\n  const rendererRef = useRef();\n  useEffect(() => {\n    if (rendererRef.current == null) {\n      rendererRef.current = new Renderer(container.current, Renderer.Backends.SVG);\n    }\n    const renderer = rendererRef.current;\n    renderer.resize(width, height);\n    const context = renderer.getContext();\n    context.setFont('Arial', 10, '').setBackgroundFillStyle('#eed');\n    let currX = 0;\n    let currY = 0;\n    let noteCount = 0;\n    const staveWidth = width - clefAndTimeWidth;\n    const createStave = () => {\n      const stave = new Stave(currX, currY, staveWidth);\n      stave.setWidth(staveWidth + clefAndTimeWidth);\n      stave.addClef(clef).addTimeSignature(timeSignature);\n      stave.setContext(context).draw();\n      return stave;\n    };\n    let currentStave = createStave();\n    staves.forEach((staveNotes, i) => {\n      const processedNotes = staveNotes.map(noteWithOctave => {\n        const [note, octave] = noteWithOctave.match(/[a-zA-Z]+|[0-9]+/g);\n        return new StaveNote({\n          keys: [`${note}/${octave}`],\n          duration: 'q' // Assuming quarter note duration\n        });\n      });\n\n      Formatter.FormatAndDraw(context, currentStave, processedNotes, {\n        auto_beam: true\n      });\n      noteCount += staveNotes.length;\n      if (noteCount >= notesPerStave) {\n        // Move to the next line\n        currX = 0;\n        currY += currentStave.getHeight() + staveSpacing;\n        noteCount = 0;\n        currentStave = createStave();\n      } else {\n        // Move to the next stave\n        currX += staveWidth;\n      }\n    });\n  }, [staves, clef, timeSignature, width, height]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: container\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 10\n  }, this);\n}\n_s(Score, \"Oo94nw6YKmif0GbcQr28f6bFgJU=\");\n_c = Score;\nvar _c;\n$RefreshReg$(_c, \"Score\");","map":{"version":3,"names":["React","useRef","useEffect","VexFlow","jsxDEV","_jsxDEV","VF","Flow","Formatter","Renderer","Stave","StaveNote","clefAndTimeWidth","notesPerStave","staveSpacing","Score","staves","clef","timeSignature","width","height","_s","container","rendererRef","current","Backends","SVG","renderer","resize","context","getContext","setFont","setBackgroundFillStyle","currX","currY","noteCount","staveWidth","createStave","stave","setWidth","addClef","addTimeSignature","setContext","draw","currentStave","forEach","staveNotes","i","processedNotes","map","noteWithOctave","note","octave","match","keys","duration","FormatAndDraw","auto_beam","length","getHeight","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/fitzpatrickcarl/my-musical-stairs-app/src/Score.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport VexFlow from 'vexflow';\n\nconst VF = VexFlow.Flow;\nconst { Formatter, Renderer, Stave, StaveNote } = VF;\n\nconst clefAndTimeWidth = 60;\nconst notesPerStave = 32;\nconst staveSpacing = 20; // Adjust this to control the space between staves\n\nexport function Score({\n  staves = [],\n  clef = 'treble',\n  timeSignature = '4/4',\n  width = 1000,\n  height = 150,\n}) {\n  const container = useRef();\n  const rendererRef = useRef();\n\n  useEffect(() => {\n    if (rendererRef.current == null) {\n      rendererRef.current = new Renderer(container.current, Renderer.Backends.SVG);\n    }\n    const renderer = rendererRef.current;\n    renderer.resize(width, height);\n    const context = renderer.getContext();\n    context.setFont('Arial', 10, '').setBackgroundFillStyle('#eed');\n\n    let currX = 0;\n    let currY = 0;\n    let noteCount = 0;\n\n    const staveWidth = (width - clefAndTimeWidth);\n\n    const createStave = () => {\n      const stave = new Stave(currX, currY, staveWidth);\n      stave.setWidth(staveWidth + clefAndTimeWidth);\n      stave.addClef(clef).addTimeSignature(timeSignature);\n      stave.setContext(context).draw();\n      return stave;\n    };\n\n    let currentStave = createStave();\n\n    staves.forEach((staveNotes, i) => {\n      const processedNotes = staveNotes.map((noteWithOctave) => {\n        const [note, octave] = noteWithOctave.match(/[a-zA-Z]+|[0-9]+/g);\n        return new StaveNote({\n          keys: [`${note}/${octave}`],\n          duration: 'q', // Assuming quarter note duration\n        });\n      });\n\n      Formatter.FormatAndDraw(context, currentStave, processedNotes, {\n        auto_beam: true,\n      });\n\n      noteCount += staveNotes.length;\n\n      if (noteCount >= notesPerStave) {\n        // Move to the next line\n        currX = 0;\n        currY += currentStave.getHeight() + staveSpacing;\n        noteCount = 0;\n        currentStave = createStave();\n      } else {\n        // Move to the next stave\n        currX += staveWidth;\n      }\n    });\n  }, [staves, clef, timeSignature, width, height]);\n\n  return <div ref={container} />;\n}\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}